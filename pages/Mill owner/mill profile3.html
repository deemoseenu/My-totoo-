<!DOCTYPE html>
<html lang="en">

<head>
  <title>Farmer Edit Page</title>
  <link rel="stylesheet" href="../../assets/mill owner .css/mill profile 3.css">
</head>

<body>
  <header>
    <a class="navigationlink" href="../Mill owner/Mill owner page 1 .html">
      <img src="../../images/arrow-back-outline.svg" alt="arrow logo" width="50px" height="100px">
    </a>
    <h1 class="t">
      <strong>PROFILE</strong>
    </h1>
  </header>
  <div class="container">
    <div>
      <img src="../../images/a37d2d1dfafd6d7d21148b8d28e409f6.jpg" class="profile-image" alt="profile logo">
    </div>
    <form class="profile-form" onsubmit="signIn(event);">
      <div class="form-row">
        <img src="../../images/person.svg" alt="person logo" width="80px">
        <div class="b">
          <input type="text" placeholder="NAME" id="name" required="true">
        </div>
      </div>
      <div class="form-row">
        <img src="../../images/person.svg" alt="person logo" width="80px">
        <div class="b">
          <input type="text"  id="company_name" required="true">
        </div>
      </div>
      <div class="form-row">
        <img src="../../images/call.svg" alt="call logo" width="80px">
        <div class="b">
          <input type="text" placeholder="MOBILE NUMBER" id="mobile_number" required="true" disabled>
        </div>
      </div>
      <div class="form-row">
        <img src="../../images/location-outline.svg" alt="call logo" width="80px">
        <div class="b">
          <input type="text" placeholder="District" id="district" required="true">
        </div>
      </div>
      <div class="form-row">
        <img src="../../images/location-outline.svg" alt="call logo" width="80px">
        <div class="b">
          <input type="text" placeholder="Town" id="town" required="true">
        </div>
      </div>
    </form>
    <div class="profile-buttons">
      <button onclick="update(event)">Save</button>
      <button onclick="log_out(event)">Log Out</button>
      <button onclick="del(event)">Delete</button>
    </div>
  </div>



        <script>// let user_list = JSON.parse(localStorage.getItem('user_list'));
    // let unique_id = JSON.parse(localStorage.getItem('unique'));

const user_list2 = JSON.parse(localStorage.getItem("user_list2"));
console.log(user_list2);

const unique_id = JSON.parse(localStorage.getItem("unique"));
    console.log(unique_id);
    function profile_data(e) {
      return e.mobile_number == unique_id;
    }
    const user_data = user_list2.find(profile_data);
    console.log(user_data);
    document.getElementById("name").value = user_data.name;
    document.getElementById("company_name").value = user_data.company_name;
    document.getElementById("mobile_number").value = user_data.mobile_number;
    document.getElementById("district").value = user_data.district;
    document.getElementById("town").value = user_data.town;

    function update(e) {
      const name = document.getElementById("name").value;
      const company_name = document.getElementById("company_name").value;
      const mobile_number = document.getElementById("mobile_number").value;
      const district = document.getElementById("district").value;
      const town = document.getElementById("town").value;
      user_data.name = name;
      user_data.company_name = company_name;
      user_data.mobile_number = mobile_number;
      user_data.district = district;
      user_data.town = town;
      localStorage.setItem("user_list2", JSON.stringify(user_list2));
      alert("Your Data is Successfully Stored");
    }
    function del(e) {
      e.preventDefault();
      if (confirm("Are you sure you want to delete your profile")) {
        const users = JSON.parse(localStorage.getItem("user_list2"));
        const unique_id = JSON.parse(localStorage.getItem("unique"));
        function login_data(e) {
          return e.mobile_number == unique_id;
        }
        const user_data = users.find(login_data);
        const index = users.indexOf(user_data);
        users.splice(index, 1);
        localStorage.setItem("user_list2", JSON.stringify(users));
        // console.log(login_data)
      }
    }
    function log_out(e) {
      alert("are you sure you want to logout");
      localStorage.removeItem("unique");
      window.location.href = "../Farmer/FARMER PAGE 1.html";
    }
</script>

    </body>

</html>